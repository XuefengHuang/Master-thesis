\documentclass[11pt, oneside]{article}   	% use "amsart" instead of "article" for AMSLaTeX format
\usepackage{geometry}                		% See geometry.pdf to learn the layout options. There are lots.
\geometry{letterpaper}                   		% ... or a4paper or a5paper or ... 
%\geometry{landscape}                		% Activate for rotated page geometry
%\usepackage[parfill]{parskip}    		% Activate to begin paragraphs with an empty line rather than an indent
\usepackage{graphicx}				% Use pdf, png, jpg, or epsÂ§ with pdflatex; use eps in DVI mode
								% TeX will automatically convert eps --> pdf in pdflatex		
\usepackage{amssymb}
\usepackage{chngpage}
\usepackage{array}

%SetFonts

%SetFonts


\title{Brief Article}
\author{Xuefeng Huang}
%\date{}							% Activate to display a given date or no date

\begin{document}
\maketitle
\begin{abstract}
As one of the most economically significant and fastest growing sectors of the Internet, broadband networks have attracted interest from researchers. To better understand broadband networks, we developed Seattle, an open research and educational testbed that utilizes computational resources provided by end users on their home wireless routers with custom firmware. Unlike most other platforms, Seattle provides a privacy protection of embedded device data and maintains the security of donated device from potentially buggy experiment codes. We find that our platform is flexible enough to implement a variety of network measurement despite its security restrictions. This paper discusses some of the challenges we faced building and using a platform for deploying measurement in home networks, describe its design and implementation.
\end{abstract}
%\section{}
%\subsection{}
\section{Introduction}
\label{sec.introduction}
As home broadband Internet access is rapidly evolving, broadband networks have attracted interests from researchers, policy makers and Internet Service Providers(ISPs). The United States alone has more than 279 million broadband users and number of Internet users in other regions are even more impressive: China has more than 641 million Internet users and other developing countries are seeing increased growth. Despite their pervasiveness, little is known about most home networks hampers progress in a number of important research areas, from ISP performance to large-scale topology mapping and home network usage.

Currently it has been difficult to study home networks on a large scale because network technologies like network address translators (NATs) present only an opaque view of the home network to the global Internet. To better understand home networks, an experimental platform should be hosted in home networks, to provide visibility into the missing part of Internet. Such a platform also should provide a set of APIs that support the implementation of as wide an array of measurement as possible without compromising the privacy of the user and abuse of host or network resources. 

Today's measurement and experimentation platform for home networks such as BISmark, Samknows and Dasu all support controlled network experimentation and broadband characterization. However, the process of vetting BISmark experiments is manual, which will be a limiting factor as the deployment grows. SamKnows has deployed thousands of home routers in the US and the UK, but only supports limited performance measurements. Dasu is a host-based software client, thus it is not able to run certain measurements due to application restriction and cannot run continuous measurements(i.e., since hosts can be turned off, moved, etc.)
 
To address these issues, we developed Seattle Testbed, an open research and educational testbed that implements a number of measurements primitives that enable researchers, policy makers and Internet Service Providers (ISPs) to program network measurements. To ensure safety, Seattle supports a very flexible language for experiment specification based on Repy which is lightweight, python based, performance isolation and extensible programming language. It provides researchers with the ability to install sandboxed measurement applications on the home gateway. 

Both strengths and challenges of a platform like Seattle Testbed stem from its inclusion of measurement nodes on the home gateway. First, each nodes must be small and easy-to-deploy because Seattle is deployed on resource-constrained devices. Second, Seattle nodes are on the direct path of real Internet users.Thus it must guarantee the safety of the volunteer nodes. Third, it is important to make system robustness, remote maintenance and update because of the unmanaged complexity of its home network environments. Finally, Seattle must provide a rich set of APIs for different network measurements.

In this paper, we introduce Seattle Testbed, a distributed cloud platform that allows researchers to run their project on system worldwide. This testbed provides secure data access while preserving user privacy. Through a programmable interface on device, the testbed enables researchers to deploy a wide range of network measurements. We also discusses the constraints we faced in the design, implementation and deployment of Seattle.

\section{Challenge and Goal}
\label{sec.goal}
A testbed that allows researchers to execute code across donated embedded devices faces three major challenges: First, the embedded devices poses a limited resources challenge - it is hard to run heavy scripting languages like Python or Ruby. The second challenge is user's networking experience. Seattle nodes are on the direct path of real Internet users. A malicious network measurement experiment will noticeably affect a normal user's network experience. The third challenge is secure data access - network traffic data pose a risk to device donors whose devices are exposed to malicious code written by users. The fourth challenge is data privacy - users should not gain access to information that donors don?t want to share. As the development of hardware technology and based on our practical experience, running Python codes are going well on embedded devices. And the last three challenges can be solved via using a secure and performance-isolated sandbox and a reference monitor framework we proposed.

We identify the design goals for network measurement platform in home networks:
\begin{itemize}
\item Safety: Internet users that participate in the testbed should not face significant risk. Code should be strictly sandboxed. Code executed on the testbed must not interfere with the performance or correctness of user's Internet connection.
\item Extensibility: The platform should provide a wide range of APIs that support the implementation of as wide an array of network measurements as possible.
\item Lightweight: Due to Seattle is deployed in home networks on resource-constrained devices, hence we don't want to impact users' Internet connectivity.
\item Accuracy: We desire the measurement platform to accurately track general network information. 
\item Easy to install and use: Should be easy to install, un-install, and stop. 
\item Portability: Measurement code should work portably on any implementation of the platform.
\end{itemize}

\section{Related Work}
\label{sec.related_work}
Our work shares goals with and builds upon ideas from several prior large-scale platforms targeting home network research.In the following paragraphs, we briefly review related works on network testbed. 
\begin{itemize}
\item \textbf{BISmark} is similar to Seattle in that it is deployed in home networks on resource-constrained devices. And currently it is used and shared by researchers at nine institutions, including commercial Internet service providers, and has enabled studies of access link performance, network connectivity, Web page load times, and user behavior and activity. However, vetting experiments is challenging. A poorly designed (or controlled) experiment can cripple a user?s Internet connection. Seattle is supported to run arbitrary codes on remote devices without compromising the security and privacy of device owners.
\item \textbf{Samknows} has designed and developed its performance tests in house, adhering to IETF RFCs where appropriate. All measurements are written in C, for performance and portability across a range of hardware platforms. But it only supports limited performance measurements. Seattle supports a very flexible language for experiment specification based on a restricted subset of Python.
\item \textbf{The RIPE Atlas project} is a global network of probes that measure Internet connectivity and reachability, providing an unprecedented understanding of the state of the Internet in real time. It has deployed thousands of probing devices worldwide, but their capabilities are limited to simple measurements (e.g., ping, traceroute). Seattle instead provides a wide range of capabilities to support complex measurements. 
\item \textbf{Dasu} is a measurement experimentation platform for the Internet edge, It supports both controlled network experimentation and broadband characterization. But it is not able to run a range of  measurements due to its capabilities are limited and cannot run continuous measurements (i.e. , since hosts can be turned off, moved, etc.).
\item \textbf{Scriptroute} provides a safe, publicly-available network probe execution environment, but ScriptRoute hasn?t been updated in a few years. Furthermore, it doesn?t support IPv6 and TCP options. Currently, Seattle not only engage in research projects, but also  allow students to get practical experience with real-world end user networks.

\item \textbf{Fathom} project explores the browser as a platform for network measurement and troubleshooting. It provides a wide range of networking primitives directly to in-page javaScript. You get direct TCP/UDP socket access, higher-level protocol APIs such as DNS, HTTP, and UPnP, and ready-made functionality such as pings and traceroute. However, the measurements are not continuous(i.e. , since browser can be turned off, etc.). Seattle instead is deployed on home routers so that measurements are continuous, direct and comprehensive.
\item \textbf{HomeNet Profiler} is a software that runs on any computer connected inside a home network, to collect a wide range of measurements about networks including the set of devices, the set of services and the characteristics of the WiFi environment. But due to it lacks programming interface so HomeNet Profiler is not flexible. Its measurements are also not continuous. Seattle not only support these capabilities HomeNet Profiler has, but also allow more measurement primitives(traceroute, ping, etc...) while preserving security and privacy.
\item \textbf{Google Analytics} is an enterprise-class based web analytics tool which provides a transparent view of website traffic and marketing effectiveness. Google Analytics has powerful and advance features that give rich insight into the websites and improve website ROI (Return on Investment). But it only supports limited website performance measurements.
\item \textbf{IETF's LMAP} is a desire to be able to coordinate the execution of broadband measurements and the collection of measurement results across a large scale set of Measurement Agents (MAs). These MAs could be in every home gateway and edge device such as set-top boxes and tablet computers, and located throughout the Internet as well. The measurement system is under the direction of a single organisation and each MA may only have a single Controller at any point in time.
\end{itemize}

\section{Threat Model}
\label{sec.threat_model}
While a wide ranges of programming functionalities on embedded devices are very useful, they also pose a risk to users. To understand the scope of issues that our work will address, we summarize all the security issues possible within the home network.

The first issue is insecure interfaces and application programming interfaces. Low-level operations (like writing to files or sending network messages) will be accessed through Application Programming Interfaces (APIs). Malfunctions and errors in the interface can lead to unwanted exposure of users data and attacks upon the data's integrity. For example, attackers can use code injection attack to gather data on local host or gain complete control. Threats can also exist as result of  poorly designed or implemented security policy. If these policies can be bypassed, the platform can be easily abused by attackers. Regardless of the threat origin, APIs need to be made secure against accidental and malicious attempts to circumvent the APIs.

The second issue is denial of service. For a distributed system, it is necessary to control resource consumption on the local host, minimizing the impact of Internet connectivity. As such, if an attacker consumes a large amount of resources, it can lead to poor performance. Therefore, managing resources at large scale while providing performance isolation is a key challenge for any distributed system software.

The third issue is home network compromise. There is an important difference between Seattle Testbed and other testbeds, such as PlanetLab. Our experiments involve home network. Attackers can get the control rights of the home network via our platform and send the malicious control commands to all the home devices, which may lead to undesired consequences. By exploiting vulnerabilities in home networks, attackers also can gather information on targets, threatening home network?s privacy and safety, understanding behavior and patterns. For instance, some devices can be shut down unusually or the information of some devices can be monitored.

The fourth issue is data leakage. Here we consider the following problem: how does a user know whether their data is accessible and has not been corrupted? Currently, many testbeds do not explicitly guarantee data integrity or availability. Users have access to the hardware and can modify firmware via testbed. Attacker also could contribute malicious data to influence conclusions. These impose new security challenges.Thus, it must prevent an experiment from performing malicious actions like reading the user's sensitive files or tampering system files.

\section{A New Design for Building Secure Network Testbed}
\label{sec.design}
Our goal is to build a secure network testbed that can mitigate the problem of end user's security and privacy issue. 

The previous works introduced in \S{\ref{sec.related_work}} serves the purpose of understanding the disadvantages of current network testbed. Our finding in \S{\ref{sec.related_work}} suggest that it is important to balance the trade-off between security and functionalitiy.

In this section, we use this idea to guild our new design for building secure network testbed. Our goal is to allow researchers to run texperiments while reducing the risk of security and privacy problem.

\subsection{Architecture Design}
Today's poor visibility into the home network hampers progress in a number of important research areas, from WiFi management strategies to broadband characterization. Several related works have been worked on deploying measurements and applications in broadband access networks. However, they have several security issues that might compromise user?s privacy. Seattle allows untrusted parties to run arbitrary codes on our platform. Different from the existing network testbeds, Seattle provides a programmable resource and privacy protection framework. A user can let a third party have access to their network traffic data within a security and performance isolated virtual machine. Users not only are able to control how much information they would share with the rest of world, but also decide how many resources an application can use. For example, an experiment could be prevented when consuming so much resources or access some interfaces which are not allowed by device's owner. 

Seattle is composed of three separate parts: router owner, clearinghouse and researcher. Router owner donates computational resources to our platform, clearinghouse enable researchers to pool and share resources, researcher is seeking to run experiments on remote router.

Before conducting any network measurement experiments, owner first downloads installer package from clearinghouse which is a testbed server that keep track of routers and allow researcher to access available routers. To run codes on owner?s router, researchers needs to download an experiment manager to his own laptop. Researcher uses the experiment manager to access the remote router directly, upload experiment codes and start or stop the execution of the experiment.

\subsection{API Design}
Our main goal is to provide a wide range of capabilities that support the implementation of a broad range of network measurements on home gateway. In order for us to perform and collect measurements from home gateway, we have proposed and implemented a programmable API that expose a set of simple capabilities. Our experiment management tool is able to use this API to perform a rich set of network measurements. Seattle Testbed currently provides three main API families and supported the types of network measurement(listed in Table 1 and Table 2):

\begin{table*} %[!ht]
\scriptsize
\centering
\begin{adjustwidth}{1cm}{-1cm}
\begin{tabular}{|p{.3\textwidth}| p{.5\textwidth}| m{.7\textwidth}|}
\hline
\textbf{API}    &  \textbf{Description} \\
 \hline
 {\bf system.scan} & {\bf Collect the list of access points found with a WiFi scan. For each access point we collect BSSID, SSID, signal strength and channel number.} \\
\hline
 {\bf system.get\_station} & {\bf Record downlink statistics per associated client(e.g., Total packets sent, received, retried, client?s signal strength at home wireless router).} \\
\hline
 {\bf utils.get\_network\_interface} & {\bf Return a list of available network interfaces.} \\
\hline
 {\bf utils.get\_network\_bytes} & {\bf Record information about the configured network interfaces.The statistics include metrics such total number of received/transmitted bytes, drops, errors.} \\
\hline
 {\bf utils.get\_network\_packets} & {\bf Record information about the configured network interfaces.The statistics include metrics such total number of received/transmitted packets, drops, errors.} \\
\hline
 {\bf network.ping} & {\bf A pure python ping implementation using raw sockets.} \\
\hline
 {\bf network.traceroute} & {\bf Return the route packets take to network host. } \\
\hline
 {\bf network.tcp} & {\bf Send or receive TCP traffic.} \\
\hline
 {\bf network.udp} & {\bf Send or receive UDP traffic.} \\
\hline
 {\bf network.getmyip} & {\bf Returns the localhost's "Internet facing" IP address.} \\
\hline
 {\bf network.dns} & {\bf Perform DNS lookups} \\
\hline
\end{tabular}
\end{adjustwidth}
\caption {API design}
\label{table:api_design}
\end{table*}

\begin{table*} %[!ht]
\scriptsize
\centering
\begin{tabular}{|l|c|c|c|c|c|c|}
\hline
\textbf{}    &  \textbf{ISP performance} & \textbf{Home network usage}  & \textbf{Internet connectivity and reachability}\\
 \hline
 {\bf system.scan} & {\bf *} & {\bf } & {\bf }\\
\hline
 {\bf system.get\_station} & {\bf *} & {\bf *} & {\bf }\\
\hline
 {\bf utils.get\_network\_interface} & {\bf *} & {\bf } & {\bf }\\
\hline
 {\bf utils.get\_network\_bytes} & {\bf *} & {\bf } & {\bf }\\
\hline
 {\bf utils.get\_network\_packets} & {\bf *} & {\bf } & {\bf *}\\
\hline
 {\bf network.ping} & {\bf *} & {\bf } & {\bf *}\\
\hline
 {\bf network.traceroute} & {\bf } & {\bf } & {\bf *}\\
\hline
 {\bf network.tcp} & {\bf *} & {\bf } & {\bf *}\\
\hline
 {\bf network.udp} & {\bf *} & {\bf *} & {\bf }\\
\hline
 {\bf network.getmyip} & {\bf *} & {\bf *} & {\bf *} \\
\hline
 {\bf network.dns} & {\bf *} & {\bf } & {\bf *}\\
\hline
\end{tabular}
\caption {Network measurement type}
\label{table:type}
\end{table*}

system provides a python interface to low-level system calls on system. Seattle Testbed sanitizes the call arguments, parsing complex output and return results to the caller. Examples in this family include get\_station and scan implementation. These methods use the iw command-line tool to gather all this information. Researchers are able to study dense WiFi networks by these functions.

utils records aggregate network statistics for passively collected data.These methods read directly and parse data from /proc/dev/net. These are able to leverage the naturally-generated network traffic as passive measurements(particularly in the area of broadband characterization) by continuously monitoring the home gateway Internet connection.

network provides low-level measurements functionalities that can be combined to build a wide range of measurement experiments. Current available measurement functions include ping, traceroute, performing DNS lookups, obtaining the local IP address, and sending / receiving TCP and UDP traffic.

\subsection{Security}
Seattle nodes are on the direct path of real Internet users, therefore we must ensure Seattle does not allow to risk to the host and network when executing experiments. To do so, Seattle Testbed uses a sandboxed environment for safe execution of external code, performance isolation for programs and traffic containment service. 

Safe execution: This is achieved by Repy, which is a subset of the POSIX API constructed with the Restricted Python sandbox. To prevent insecure actions the sandbox hooks into the Python parser and reads the program?s parse tree. Only actions that the sandbox can verify as safe may execute. Repy is highly portable and has been running on a variety of different operating systems over the past five years.

Limit on resource consumption: Seattle carefully control resource consumption on the host and minimize the impacts on the user?s Internet connection. In order to securely interact with home gateway on remote user devices, Seattle uses Fence to allocate a fixed percentage of the device?s CPU, memory disk, and other resources to one or more VMs. As a result, experiment programs are sandboxed and securely isolated from other programs on the same device. 

Traffic containment service: Due to seattle allows TCP/UDP socket operation, attackers can exploit the security vulnerability to compromise the computers, printers and other connected devices in home networks. To prevent such actions, there must be restrictions on which hosts testbed nodes can communicate with. Seattle provide a interposition mechanism, which restricts communication between the local node and a remote node based on the destination IP, port, or some combination of the two. 

\subsection{Privacy}
Although a rich set of capabilities enhance the convenience of user interfaces and application usefulness, they also raise serious privacy concerns. For example, network traffic volume over interface and the information of connected devices in home networks produce a rich history, it will lead to behaviour prediction, such information invades user privacy. 

In order not to allow measurements to exfiltrate sensitive information from home gateway, Seattle provides a framework of reference monitor, to enforce mandatory access control to sensitive data in real time. Based on the type of network measurements, the capabilities can be passed through, filtered, or dropped by the reference monitor. For a user who wants to learn about Internet censorship , a filter might perform an action such as removing access point information from WiFi scans and network traffic volume information in home networks, only allow to access ping and traceroute functionality.

\section{Implementation}
\label{sec.implementation}

Based on the design introduced in \S{\ref{sec.design}}, we implement a secure network testbed. We describe the implementation details of our system in this section.

\subsection{Architecture of Seattle}
The primary goal of Seattle is to run a wide range of network measurements on remote home gateway without compromising home network security and privacy. To achieve this goal, we try to minimize the disruption of Internet connectivity. From distributed platform design, we leverage Seattle Testbed which is a community-driven, open source cloud computing system to acheive this goal. 

When distributed platform is achieved, we also want to run arbitrary codes across donated devices. We safely extend new research capabilities in our Repy sandbox. We use Repy sandbox to reconstruct a programming interface, which provides network functionalities sufficient for most network measurements.

\subsection{Implementation Details}
\textbf{Seattle porting onto home wireless router} 
Seattle is a platform for networking and distributed systems research. It supports a wide range of devices including desktop, laptop, servers, etc.

Compared to desktop and laptop environments, deployment on home wireless router has more resource limitation such as restricted computational resources. However, recently we are able to port Seattle to embedded devices.Users can now build their own Seattle installer(IPK) via OpenWrt SDK and install it on the device easily. 

\textbf{Supporting wireless interface on wireless embedded devices} 
Due to its isolation of the virtual machine, Seattle cannot normally access network traffic data on a user?s home router devices, such as bandwidth, WiFi SSID and signal strength, etc. However, if the data is anonymized, it would be very useful to researchers. Seattle provides an API for reading wireless network data from a Seattle VM and providing it to users. It is extended from Seattle RepyV2 and provide system wide protection against greedy processes that include isolating performance. 

\textbf{Reference monitor}
Seattle also provides a framework of reference monitor, to enforce mandatory access control to sensitive data in real time. Based on the type of network measurement experiment, the data returned by the embedded devices can be passed through, filtered, or dropped by the reference monitor.


\end{document}  